{%- comment -%}
  Snippet: Active Filters Display
  Purpose: Show currently applied filters as removable chips
{%- endcomment -%}

{%- assign has_active_filters = false -%}

{%- if collection and collection.filters -%}
  {%- for filter in collection.filters -%}
    {%- for filter_value in filter.values -%}
      {%- if filter_value.active -%}
        {%- assign has_active_filters = true -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endfor -%}
{%- endif -%}

{%- if has_active_filters -%}
  <div class="active-filters" data-active-filters>
    <div class="active-filters__container">
      <div class="active-filters__header">
        <span class="active-filters__label">{{ 'page-specific.collections.active_filters' | t }}:</span>
      </div>
      <div class="active-filters__chips">
        {%- if collection and collection.filters -%}
          {%- for filter in collection.filters -%}
            {%- for filter_value in filter.values -%}
              {%- if filter_value.active -%}
                <a 
                  href="{{ filter_value.url_to_remove }}"
                  class="active-filter-chip"
                  data-filter-chip
                  data-filter-param="{{ filter_value.param_name }}"
                  data-filter-value="{{ filter_value.value }}"
                  aria-label="{{ 'page-specific.collections.remove_filter' | t }}: {{ filter_value.label }}"
                >
                  <span class="active-filter-chip__text">{{ filter_value.label }}</span>
                  <span class="active-filter-chip__remove" aria-hidden="true">Ã—</span>
                </a>
              {%- endif -%}
            {%- endfor -%}
          {%- endfor -%}
        {%- endif -%}
      </div>

      {%- assign clear_all_text = 'page-specific.collections.clear_all' | t -%}
      {%- assign clear_all_aria = 'page-specific.collections.clear_all_aria' | t -%}
      {%- assign clear_all_url = collection.url | append: '?sort_by=' | append: collection.sort_by -%}
      <a 
        href="{{ clear_all_url }}"
        class="active-filters__clear-all"
        data-filter-clear-all
        aria-label="{{ clear_all_aria }}"
      >
        {{ clear_all_text }}
      </a>
    </div>
  </div>
{%- endif -%}
