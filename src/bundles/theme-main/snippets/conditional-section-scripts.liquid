{%- comment -%}
  Conditional Section JavaScript Loading
  Simplified approach using template detection only
  - Index: Load all regular sections (exclude page-specific)
  - Other templates: Load only page-specific sections
{%- endcomment -%}

{%- comment -%} Cache-busting for development {%- endcomment -%}
{% if shop.domain contains 'myshopify.com' or request.host contains '127.0.0.1' or request.host contains 'localhost' %}
  {% assign cache_buster = 'now' | date: '%s' %}
{% endif %}

{% if template contains 'index' %}
  {%- comment -%} Index Page: Load all regular section scripts {%- endcomment -%}
  {% if shop.domain contains 'myshopify.com' or request.host contains '127.0.0.1' or request.host contains 'localhost' %}
    <script src="{{ 'section-big-heading.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
    <script src="{{ 'section-showcase.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
    <script src="{{ 'section-image-menu.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
    <script src="{{ 'section-image-slider.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
  {% else %}
    <script src="{{ 'section-big-heading.js' | asset_url }}" defer></script>
    <script src="{{ 'section-showcase.js' | asset_url }}" defer></script>
    <script src="{{ 'section-image-menu.js' | asset_url }}" defer></script>
    <script src="{{ 'section-image-slider.js' | asset_url }}" defer></script>
  {% endif %}

{% elsif template contains 'product' %}
  {%- comment -%} Product Page: Load page-specific product scripts {%- endcomment -%}
  {% if shop.domain contains 'myshopify.com' or request.host contains '127.0.0.1' or request.host contains 'localhost' %}
    <script src="{{ 'section-page-product.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
  {% else %}
    <script src="{{ 'section-page-product.js' | asset_url }}" defer></script>
  {% endif %}

{% elsif template contains 'collection' or template contains 'search' %}
  {%- comment -%} Collection & Search Pages: Load page-specific collection scripts {%- endcomment -%}
  {% if shop.domain contains 'myshopify.com' or request.host contains '127.0.0.1' or request.host contains 'localhost' %}
    <script src="{{ 'section-page-collections.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
    <script src="{{ 'section-image-menu.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
  {% else %}
    <script src="{{ 'section-page-collections.js' | asset_url }}" defer></script>
    <script src="{{ 'section-image-menu.js' | asset_url }}" defer></script>
  {% endif %}

{% elsif template contains 'page' %}
  {%- comment -%} Other Pages: Load page-specific scripts based on template suffix {%- endcomment -%}
  {% if template contains 'page.faq' %}
    {% if shop.domain contains 'myshopify.com' or request.host contains '127.0.0.1' or request.host contains 'localhost' %}
      <script src="{{ 'section-page-faq.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
    {% else %}
      <script src="{{ 'section-page-faq.js' | asset_url }}" defer></script>
    {% endif %}
  {% endif %}
  {% if template contains 'page.account' %}
    {% if shop.domain contains 'myshopify.com' or request.host contains '127.0.0.1' or request.host contains 'localhost' %}
      <script src="{{ 'section-page-account.js' | asset_url | append: '?v=' | append: cache_buster }}" defer></script>
    {% else %}
      <script src="{{ 'section-page-account.js' | asset_url }}" defer></script>
    {% endif %}
  {% endif %}
{% endif %}