<li class="cart-drawer__item" data-line="{{ data_line }}">
  <div class="cart-drawer__item-image">
    <a href="{{ item.url }}">
      {% if item.image %}
        <img src="{{ item.image | img_url: 'medium' }}" height="100%" width="auto" alt="{{ item.title }}">
      {% elsif item.featured_image %}
        <img src="{{ item.featured_image | img_url: 'medium' }}" height="100%" width="auto" alt="{{ item.title }}">
      {% endif %}
    </a>
  </div>
  <div class="cart-drawer__item-details">
    <div class="cart-drawer__item-actions">
      {%- # Product Title and Info -%}
      {% assign product_item = item.product | default: item %}
      {% render 'snippet-feature-product-info-header', product: product_item %}
      {% render 'snippet-feature-product-info-price', current_variant: item %}
    </div>

    <div class="cart-drawer__item-actions cart-drawer__item-actions-middle">
      {%- # ── Colour‑swatch logic (all variants) ──────────────── -%}
      {%- assign product_ref = item.product | default: item -%}
      {%- assign color_option = null -%}
      {%- for opt in product_ref.options_with_values -%}
        {%- assign opt_name = opt.name | downcase -%}
        {%- if opt_name == 'color' or opt_name == 'colour' or opt_name == 'farbe' -%}
          {%- assign color_option = opt -%}
          {% break -%}
        {%- endif -%}
      {%- endfor -%}

      {%- if item.variant -%}
        {%- render 'snippet-feature-product-info-color-size', item: item -%}
      {%- elsif color_option and color_option.values.size > 1 -%}
        <a href="{{item.url}}" style="white-space: nowrap; display:flex; gap: 5px;">
          <span class="product-card__variant-cart-text">
            {{ 'products.colors.label' | t }}
          </span>
          {%- assign unique_color_values = color_option.values | uniq -%}
          <span class="product-color-swatches">
            {%- for color_value in unique_color_values -%}
              {%- render 'snippet-feature-product-info-color-swatch-icon', value: color_value, static: true -%}
            {%- endfor -%}
          </span>
        </a>
      {%- endif -%}
    </div>

    {% if show_quantity %}
      <div class="cart-drawer__item-actions cart-drawer__item-actions-end">
        <div class="cart-drawer__item-quantity">
          <button class="quantity-button quantity-button--minus" data-line="{{ data_line }}">-</button>
          <input type="number" min="1" class="quantity-input" value="{{ item.quantity }}" data-line="{{ data_line }}">
          <button class="quantity-button quantity-button--plus" data-line="{{ data_line }}">+</button>
        </div>
        <button class="cart-drawer__item-remove" data-line="{{ data_line }}" aria-label="Artikel entfernen">
          Entfernen
        </button>
      </div>
    {% endif %}
  </div>
</li>
