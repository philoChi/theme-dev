{%- comment -%}
Announcement Bar Section
Displays promotional message with info icons and social links
{%- endcomment -%}

{%- liquid
  assign free_shipping_value = settings.free_shipping_germany | times: 100 | money_without_trailing_zeros
  assign announcement_text = 'global.header-group.announcement.free_shipping_text' | t: free_shipping_value: free_shipping_value
-%}

<div class="announcement__content-overlay">
  <div class="announcement__content-wrapper">
    {%- comment -%} Left Section: Info Icons {%- endcomment -%}
    <div class="announcement__section announcement__section--left">
      {%- render 'snippet-section-announcement-icons',
          show_left: section.settings.infoicon_left_visibility,
          show_right: section.settings.infoicon_right_visibility,
          left_image: section.settings.icon_info_image_left,
          right_image: section.settings.icon_info_image_right,
          left_fallback_icon: 'icon-dhl',
          right_fallback_icon: 'icon-flag-german'
      -%}
    </div>

    {%- comment -%} Right Section: Social Links {%- endcomment -%}
    <div class="announcement__section announcement__section--right">
      {%- render 'snippet-section-announcement-links',
          show_faq: section.settings.show_faq_link,
          faq_url: section.settings.faq_link
      -%}
    </div>
  </div>
</div>

{%- comment -%} Background Grid Layout {%- endcomment -%}
<div class="announcement__container">
  <div class="announcement__section--left-bg"></div>
  
  <div class="announcement__section announcement__section--center">
    <div class="announcement__text" role="banner" aria-label="Kostenloser Versand Information">
      {{ announcement_text }}
    </div>
  </div>
  
  <div class="announcement__section--right"></div>
</div>

{% schema %}
{
  "name": "Announcement Bar",
  "tag": "section",
  "class": "announcement-section",
  "settings": [
    {
      "type": "header",
      "content": "Info Icons (Left Side)"
    },
    {
      "type": "checkbox",
      "id": "infoicon_left_visibility",
      "label": "Show Left Icon",
      "info": "Display an icon on the left side (DHL shipping by default)",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "icon_info_image_left",
      "label": "Custom Left Icon",
      "info": "Upload a custom icon (20x20px recommended). If empty, default DHL icon will be used."
    },
    {
      "type": "checkbox",
      "id": "infoicon_right_visibility",
      "label": "Show Right Icon",
      "info": "Display an icon on the right side (German flag by default)",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "icon_info_image_right",
      "label": "Custom Right Icon",
      "info": "Upload a custom icon (20x20px recommended). If empty, default German flag will be used."
    },
    {
      "type": "header",
      "content": "Links & Navigation"
    },
    {
      "type": "checkbox",
      "id": "show_faq_link",
      "label": "Show FAQ Link",
      "info": "Display a link to the FAQ page in the announcement bar",
      "default": true
    },
    {
      "type": "url",
      "id": "faq_link",
      "label": "Custom FAQ Link",
      "info": "Override the default FAQ page link. Leave empty to use /pages/faq"
    },
    {
      "type": "header",
      "content": "Social Media Links"
    },
    {
      "type": "paragraph",
      "content": "Social media links (Instagram, Facebook) are automatically pulled from your store's brand settings under Settings â†’ Brand. The contact link uses your Contact page."
    }
  ],
  "presets": [
    {
      "name": "Announcement Bar",
      "settings": {
        "infoicon_left_visibility": true,
        "infoicon_right_visibility": true,
        "show_faq_link": true
      }
    }
  ],
  "enabled_on": {
    "groups": ["header"]
  }
}
{% endschema %}
